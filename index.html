<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель - Пеликан Алаколь</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="config.js"></script>
    <style>
        :root { --primary: #2c3e50; --secondary: #3498db; --success: #27ae60; --danger: #e74c3c; --light: #ecf0f1; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui; background: #f8f9fa; color: #2c3e50; }
        .admin-container { display: flex; height: 100vh; background: white; }
        .sidebar { width: 250px; background: var(--primary); color: white; padding: 20px; }
        .sidebar h2 { margin-bottom: 20px; }
        .sidebar ul { list-style: none; }
        .sidebar li { padding: 12px; margin: 5px 0; border-radius: 6px; cursor: pointer; }
        .sidebar li.active { background: var(--secondary); }
        .sidebar li:hover { background: #34495e; }
        .content { flex: 1; padding: 20px; overflow-y: auto; }
        .editor { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        .btn-primary { background: var(--secondary); color: white; }
        .notification { position: fixed; top: 20px; right: 20px; padding: 15px; background: var(--success); color: white; border-radius: 4px; display: none; }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="sidebar" id="sidebar">
            <h2><i class="fas fa-cog"></i> Панель управления</h2>
            <ul id="menu"></ul>
        </div>
        <div class="content">
            <div id="editor-area">
                <h1>Админ-панель Пеликан Алаколь</h1>
                <p>✅ Успешно загружена!</p>
                <p>Нажмите <strong>Ctrl+K</strong> для настройки GitHub токена</p>
            </div>
        </div>
    </div>
    <div class="notification" id="notification"></div>

    <script>
        class PelikanAdmin {
            constructor() {
                this.config = window.ADMIN_CONFIG;
                this.token = localStorage.getItem('github_token');
            }

            init() {
                this.renderMenu();
                this.setupEventListeners();
                this.showNotification('Админ-панель готова к работе!', 'success');
            }

            renderMenu() {
                const menu = document.getElementById('menu');
                this.config.contentTypes.forEach(type => {
                    const li = document.createElement('li');
                    li.innerHTML = `<i class="fas fa-${this.getIcon(type)}"></i> ${this.config.names[type]}`;
                    li.onclick = () => this.showSection(type);
                    menu.appendChild(li);
                });
            }

            getIcon(type) {
                const icons = { 
                    activities: 'calendar-alt', 
                    news: 'newspaper', 
                    gallery: 'images', 
                    menu: 'th-large', 
                    weather: 'cloud-sun', 
                    offers: 'gift' 
                };
                return icons[type] || 'file';
            }

            showSection(type) {
                const editorArea = document.getElementById('editor-area');
                editorArea.innerHTML = `
                    <h2><i class="fas fa-${this.getIcon(type)}"></i> ${this.config.names[type]}</h2>
                    <p>Для работы с этим разделом нужно:</p>
                    <ol>
                        <li>Нажать <strong>Ctrl+K</strong> и ввести GitHub токен</li>
                        <li>Убедиться что в репозитории pelikan-app есть папка shared-content/data/</li>
                    </ol>
                    <button class="btn btn-primary" onclick="admin.setupToken()">
                        <i class="fas fa-key"></i> Настроить GitHub токен
                    </button>
                `;
                
                document.querySelectorAll('#menu li').forEach(li => li.classList.remove('active'));
                event.target.classList.add('active');
            }

            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.style.background = type === 'error' ? 'var(--danger)' : 'var(--success)';
                notification.style.display = 'block';
                setTimeout(() => { notification.style.display = 'none'; }, 3000);
            }

            setupEventListeners() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 'k') {
                        e.preventDefault();
                        this.setupToken();
                    }
                });
            }

            setupToken() {
                const token = prompt('Введите GitHub Personal Access Token:');
                if (token) {
                    localStorage.setItem('github_token', token);
                    this.token = token;
                    this.showNotification('GitHub токен сохранен! Теперь можно редактировать контент.');
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            window.admin = new PelikanAdmin();
            window.admin.init();
        });
    </script>
</body>
</html>
